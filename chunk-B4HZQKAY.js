import{f as st,g as D,h as Ct,i as Dt}from"./chunk-7USNAL6V.js";import{a as ot}from"./chunk-TVSMZRE7.js";import{a as H,b as Q,c as Tt,d as Ft,e as At,f as wt,g as Nt,h as zt,i as Ot,j as jt}from"./chunk-D5QC4X56.js";import{a as q,b as he,c as St,e as G,f as U,g as $,h as X,i as Vt,j as Rt,k as Lt}from"./chunk-VOS5Y7QA.js";import{a as N,b as xt,c as gt,d as ae,g as z,h as O,i as Pt,j as re,l as ce,o as pe}from"./chunk-H5JS4S6D.js";import{$a as A,$c as ee,Ab as Y,Ba as p,Bb as J,Cd as se,Dc as rt,Fc as De,Gb as Ye,Ha as y,Hb as M,Ia as Xe,Ib as Je,Id as me,Jc as ct,Jd as B,Kb as et,Lc as nt,Ma as v,Nc as lt,Q as Re,R as Le,S as Ne,Sa as ge,Ta as s,Tb as tt,U as ze,Va as Pe,Wa as He,Wc as dt,X as C,Xb as it,Xc as L,Ya as T,Yb as R,Yc as mt,Za as Ce,Zc as P,_a as F,_c as pt,ab as c,ad as ht,ba as Oe,bb as a,bd as Se,ca as u,cb as k,da as b,db as g,dd as te,ea as je,eb as Qe,ed as ut,fa as Be,fb as m,gb as x,gc as at,gd as bt,hb as We,hd as kt,ib as Ke,id as ft,ja as qe,jd as _t,kb as Ee,kd as yt,lb as Ie,ld as vt,ma as w,mb as Me,md as ie,na as Ge,nd as oe,od as j,pa as Ue,pb as I,pd as ne,qb as n,ra as E,rb as V,sb as _,sd as Et,ta as $e,tb as Ze,td as It,wd as Mt,xa as d,xd as le,yb as Z,yd as de}from"./chunk-O76IUHAJ.js";var ue=(t=>(t.All="All",t.Pending="Pending",t.Processed="Processed",t))(ue||{}),W=class r{searchTerm=E("");selectedFilters=E([]);filterPayslips(o,e,t){let i=this.selectedFilters(),l=this.searchTerm();return o.filter(h=>{let Wt=e.find(xe=>xe.id===h.employeeId)?.name||"",Ve=t.find(xe=>xe.id===h.periodId)?.status||"",Kt=l===""||Wt.toLowerCase().includes(l)||h.periodId.toLowerCase().includes(l),Zt=i.length===0||i.includes("All")||i.includes("Pending")&&Ve==="Pending"||i.includes("Processed")&&Ve==="Processed";return Kt&&Zt})}setSearchTerm(o){this.searchTerm.set(o.toLowerCase())}toggleFilter(o){this.selectedFilters.update(e=>{if(o==="All")return e.includes("All")?[]:["All"];let t=e.filter(i=>i!=="All");return t.includes(o)?t=t.filter(i=>i!==o):t.push(o),t})}clearFilters(){this.selectedFilters.set([])}removeFilter(o){this.selectedFilters.update(e=>e.filter(t=>t!==o))}static \u0275fac=function(e){return new(e||r)};static \u0275prov=Le({token:r,factory:r.\u0275fac,providedIn:"root"})};function ti(r,o){if(r&1){let e=g();c(0,"button",7),m("click",function(){let i=u(e).$implicit,l=x();return l.filterService.toggleFilter(i),b(l.filterChange.emit())}),c(1,"mat-icon"),n(2),a(),c(3,"span"),n(4),a()()}if(r&2){let e=o.$implicit,t=x();d(2),V(t.filterService.selectedFilters().includes(e)?"check_box":"check_box_outline_blank"),d(2),V(e)}}function ii(r,o){if(r&1){let e=g();c(0,"mat-chip"),n(1),c(2,"button",10),m("click",function(){let i=u(e).$implicit,l=x(2);return l.filterService.removeFilter(i),b(l.filterChange.emit())}),c(3,"mat-icon"),n(4,"cancel"),a()()()}if(r&2){let e=o.$implicit;d(),_(" ",e," ")}}function oi(r,o){if(r&1&&(c(0,"mat-toolbar-row"),F(1,ii,5,1,"mat-chip",null,Ce),a()),r&2){let e=x();d(),A(e.filterService.selectedFilters())}}var be=class r{constructor(o){this.filterService=o}filterChange=new w;addPayPeriod=new w;filterTypes=Object.values(ue);PayrollFilterType=ue;onSearch(o){let e=o.target.value;this.filterService.setSearchTerm(e),this.filterChange.emit()}static \u0275fac=function(e){return new(e||r)(p(W))};static \u0275cmp=y({type:r,selectors:[["app-payroll-toolbar"]],outputs:{filterChange:"filterChange",addPayPeriod:"addPayPeriod"},decls:33,vars:4,consts:[["menu","matMenu"],["filterMenu","matMenu"],["matInput","","placeholder","Search payslips",3,"input"],["matSuffix",""],[2,"flex","1 1 auto"],["mat-icon-button","","aria-label","Menu button",3,"matMenuTriggerFor"],["mat-menu-item","",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"],["mat-menu-item",""],["mat-menu-item","",3,"click","disabled"],["matChipRemove","",3,"click"]],template:function(e,t){if(e&1){let i=g();c(0,"mat-toolbar")(1,"mat-toolbar-row")(2,"mat-form-field")(3,"mat-label"),n(4,"Search"),a(),c(5,"input",2),m("input",function(h){return u(i),b(t.onSearch(h))}),a(),c(6,"mat-icon",3),n(7,"search"),a()(),k(8,"span",4),c(9,"button",5)(10,"mat-icon"),n(11,"more_vert"),a()(),c(12,"mat-menu",null,0)(14,"button",6)(15,"mat-icon"),n(16,"filter_list"),a(),c(17,"span"),n(18,"Filters"),a()(),c(19,"button",7),m("click",function(){return u(i),b(t.addPayPeriod.emit())}),c(20,"mat-icon"),n(21,"add"),a(),c(22,"span"),n(23,"Add Pay Period"),a()()(),c(24,"mat-menu",null,1),F(26,ti,5,2,"button",8,Ce),k(28,"mat-divider"),c(29,"button",9),m("click",function(){return u(i),t.filterService.clearFilters(),b(t.filterChange.emit())}),c(30,"span"),n(31,"Clear Filters"),a()()()(),v(32,oi,3,0,"mat-toolbar-row"),a()}if(e&2){let i=I(13),l=I(25);d(9),s("matMenuTriggerFor",i),d(5),s("matMenuTriggerFor",l),d(12),A(t.filterTypes),d(3),s("disabled",t.filterService.selectedFilters().length===0),d(3),T(t.filterService.selectedFilters().length>0?32:-1)}},dependencies:[O,z,N,ae,Q,H,P,mt,Lt,Rt,Vt,B,me,jt,zt,Nt,Ot,ce,re,Pt,ne,j],encapsulation:2})};var ri=(r,o)=>o.type;function ci(r,o){if(r&1&&n(0),r&2){let e=x().$implicit;_(" (",e.percentage*100,"%) ")}}function ni(r,o){if(r&1&&(c(0,"span",3),n(1),Y(2,"currency"),v(3,ci,1,1),a()),r&2){let e=o.$implicit;d(),Ze(" ",e.type,": ",J(2,3,e.amount)," "),d(2),T(e.percentage?3:-1)}}var fe=class r{constructor(o,e,t){this.dialogRef=o;this.payslip=e;this.payrollService=t;let i=this.payrollService.getEmployees()().find(l=>l.id===e.employeeId);this.employeeName=i?.name||"Unknown Employee"}employeeName;closeDialog(){this.dialogRef.close()}static \u0275fac=function(e){return new(e||r)(p(q),p(he),p(D))};static \u0275cmp=y({type:r,selectors:[["app-payslip-detail"]],decls:38,vars:10,consts:[["mat-dialog-title",""],["matListItemIcon",""],["matListItemTitle",""],["matListItemLine",""],["mat-button","",3,"click"]],template:function(e,t){e&1&&(c(0,"h2",0),n(1),a(),c(2,"mat-dialog-content")(3,"mat-list")(4,"mat-list-item")(5,"mat-icon",1),n(6,"person"),a(),c(7,"span",2),n(8),a(),c(9,"span",3),n(10),a()(),k(11,"mat-divider"),c(12,"mat-list-item")(13,"mat-icon",1),n(14,"attach_money"),a(),c(15,"span",2),n(16),Y(17,"currency"),a(),c(18,"span",3),n(19),Y(20,"currency"),a()(),k(21,"mat-divider"),c(22,"mat-list-item")(23,"mat-icon",1),n(24,"list"),a(),c(25,"span",2),n(26,"Deductions:"),a(),F(27,ni,4,5,"span",3,ri),a(),k(29,"mat-divider"),c(30,"mat-list-item")(31,"mat-icon",1),n(32,"calendar_today"),a(),c(33,"span",2),n(34),a()()()(),c(35,"mat-dialog-actions")(36,"button",4),m("click",function(){return t.closeDialog()}),n(37,"Close"),a()()),e&2&&(d(),_("Payslip - ",t.employeeName,""),d(7),_("Employee ID: ",t.payslip.employeeId,""),d(2),_("Period: ",t.payslip.periodId,""),d(6),_("Gross Pay: ",J(17,6,t.payslip.grossPay),""),d(3),_("Net Pay: ",J(20,8,t.payslip.netPay),""),d(8),A(t.payslip.deductions),d(7),_("Payment Date: ",t.payslip.paymentDate,""))},dependencies:[X,G,$,U,P,L,se,le,de,Mt,j,It,Et,B,me,it],encapsulation:2})};function si(r,o){r&1&&(c(0,"mat-error"),n(1," Start date is required "),a())}function mi(r,o){r&1&&(c(0,"mat-error"),n(1," End date is required "),a())}function pi(r,o){r&1&&(c(0,"div",14),n(1," End date must be after start date "),a())}var _e=class r{constructor(o,e,t,i){this.fb=o;this.dialogRef=e;this.payrollService=t;this.notification=i;this.payPeriodForm=this.fb.group({startDate:[null,Se.required],endDate:[null,Se.required]},{validators:this.dateRangeValidator})}payPeriodForm;startDateValue=null;endDateValue=null;generatedId="";dateRangeValidator(o){let e=o.get("startDate")?.value,t=o.get("endDate")?.value;return e&&t&&new Date(e)>new Date(t)?{dateRange:!0}:null}onStartDateChange(o){o.value&&(this.startDateValue=o.value,this.payPeriodForm.patchValue({startDate:this.startDateValue}),this.startDateValue&&(this.generatedId=this.payrollService.generatePayPeriodId(this.startDateValue)),this.payPeriodForm.updateValueAndValidity())}onEndDateChange(o){o.value&&(this.endDateValue=o.value,this.payPeriodForm.patchValue({endDate:this.endDateValue}),this.payPeriodForm.updateValueAndValidity())}hasError(o,e){let t=this.payPeriodForm.get(o);return t?t.hasError(e)&&(t.touched||t.dirty):!1}cancel(){this.dialogRef.close()}save(){if(this.payPeriodForm.invalid){this.notification.error("Please fix the validation errors before saving");return}if(!this.startDateValue||!this.endDateValue){this.notification.error("Both start and end dates are required");return}try{let o=this.payrollService.formatDateString(this.startDateValue),e=this.payrollService.formatDateString(this.endDateValue),t={id:this.generatedId,startDate:o,endDate:e,status:"Pending"};this.dialogRef.close(t)}catch(o){this.notification.error("Failed to create pay period. Please try again."),console.error("Error creating pay period:",o)}}static \u0275fac=function(e){return new(e||r)(p(vt),p(q),p(D),p(pe))};static \u0275cmp=y({type:r,selectors:[["app-add-pay-period-dialog"]],features:[Z([ct()])],decls:33,vars:10,consts:[["startPicker",""],["endPicker",""],["mat-dialog-title",""],[3,"formGroup"],[1,"dialog-form"],["appearance","outline"],["matInput","","readonly","",3,"value"],["matInput","","formControlName","startDate",3,"dateChange","matDatepicker"],["matSuffix","",3,"for"],[4,"ngIf"],["matInput","","formControlName","endDate",3,"dateChange","matDatepicker"],["class","error-message",4,"ngIf"],["mat-button","",3,"click"],["mat-raised-button","","color","primary",3,"click","disabled"],[1,"error-message"]],template:function(e,t){if(e&1){let i=g();c(0,"h2",2),n(1,"Add New Pay Period"),a(),c(2,"form",3)(3,"mat-dialog-content")(4,"div",4)(5,"mat-form-field",5)(6,"mat-label"),n(7,"ID"),a(),k(8,"input",6),c(9,"mat-hint"),n(10,"ID will be auto-generated from the start date"),a()(),c(11,"mat-form-field",5)(12,"mat-label"),n(13,"Start Date"),a(),c(14,"input",7),m("dateChange",function(h){return u(i),b(t.onStartDateChange(h))}),a(),k(15,"mat-datepicker-toggle",8)(16,"mat-datepicker",null,0),v(18,si,2,0,"mat-error",9),a(),c(19,"mat-form-field",5)(20,"mat-label"),n(21,"End Date"),a(),c(22,"input",10),m("dateChange",function(h){return u(i),b(t.onEndDateChange(h))}),a(),k(23,"mat-datepicker-toggle",8)(24,"mat-datepicker",null,1),v(26,mi,2,0,"mat-error",9),a(),v(27,pi,2,0,"div",11),a()(),c(28,"mat-dialog-actions")(29,"button",12),m("click",function(){return u(i),b(t.cancel())}),n(30,"Cancel"),a(),c(31,"button",13),m("click",function(){return u(i),b(t.save())}),n(32," Add Pay Period "),a()()()}if(e&2){let i=I(17),l=I(25);d(2),s("formGroup",t.payPeriodForm),d(6),s("value",t.generatedId),d(6),s("matDatepicker",i),d(),s("for",i),d(3),s("ngIf",t.hasError("startDate","required")),d(4),s("matDatepicker",l),d(),s("for",l),d(3),s("ngIf",t.hasError("endDate","required")),d(),s("ngIf",t.payPeriodForm.errors==null?null:t.payPeriodForm.errors.dateRange),d(4),s("disabled",t.payPeriodForm.invalid||!t.generatedId)}},dependencies:[R,tt,X,G,$,U,P,L,O,z,N,gt,xt,ae,Q,H,B,wt,Tt,Ft,At,ie,kt,ee,te,ut,oe,_t,yt],encapsulation:2})};var hi=["input"],ui=["label"],bi=["*"],ki=new ze("mat-checkbox-default-options",{providedIn:"root",factory:Xt});function Xt(){return{color:"accent",clickAction:"check-indeterminate",disabledInteractive:!1}}var f=function(r){return r[r.Init=0]="Init",r[r.Checked=1]="Checked",r[r.Unchecked=2]="Unchecked",r[r.Indeterminate=3]="Indeterminate",r}(f||{}),fi={provide:pt,useExisting:Re(()=>ye),multi:!0},we=class{source;checked},$t=Xt(),ye=(()=>{class r{_elementRef=C(Ue);_changeDetectorRef=C(Ye);_ngZone=C(Ge);_animationMode=C($e,{optional:!0});_options=C(ki,{optional:!0});focus(){this._inputElement.nativeElement.focus()}_createChangeEvent(e){let t=new we;return t.source=this,t.checked=e,t}_getAnimationTargetElement(){return this._inputElement?.nativeElement}_animationClasses={uncheckedToChecked:"mdc-checkbox--anim-unchecked-checked",uncheckedToIndeterminate:"mdc-checkbox--anim-unchecked-indeterminate",checkedToUnchecked:"mdc-checkbox--anim-checked-unchecked",checkedToIndeterminate:"mdc-checkbox--anim-checked-indeterminate",indeterminateToChecked:"mdc-checkbox--anim-indeterminate-checked",indeterminateToUnchecked:"mdc-checkbox--anim-indeterminate-unchecked"};ariaLabel="";ariaLabelledby=null;ariaDescribedby;ariaExpanded;ariaControls;ariaOwns;_uniqueId;id;get inputId(){return`${this.id||this._uniqueId}-input`}required;labelPosition="after";name=null;change=new w;indeterminateChange=new w;value;disableRipple;_inputElement;_labelElement;tabIndex;color;disabledInteractive;_onTouched=()=>{};_currentAnimationClass="";_currentCheckState=f.Init;_controlValueAccessorChangeFn=()=>{};_validatorChangeFn=()=>{};constructor(){C(at).load(nt);let e=C(new qe("tabindex"),{optional:!0});this._options=this._options||$t,this.color=this._options.color||$t.color,this.tabIndex=e==null?0:parseInt(e)||0,this.id=this._uniqueId=C(rt).getId("mat-mdc-checkbox-"),this.disabledInteractive=this._options?.disabledInteractive??!1}ngOnChanges(e){e.required&&this._validatorChangeFn()}ngAfterViewInit(){this._syncIndeterminate(this._indeterminate)}get checked(){return this._checked}set checked(e){e!=this.checked&&(this._checked=e,this._changeDetectorRef.markForCheck())}_checked=!1;get disabled(){return this._disabled}set disabled(e){e!==this.disabled&&(this._disabled=e,this._changeDetectorRef.markForCheck())}_disabled=!1;get indeterminate(){return this._indeterminate}set indeterminate(e){let t=e!=this._indeterminate;this._indeterminate=e,t&&(this._indeterminate?this._transitionCheckState(f.Indeterminate):this._transitionCheckState(this.checked?f.Checked:f.Unchecked),this.indeterminateChange.emit(this._indeterminate)),this._syncIndeterminate(this._indeterminate)}_indeterminate=!1;_isRippleDisabled(){return this.disableRipple||this.disabled}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}writeValue(e){this.checked=!!e}registerOnChange(e){this._controlValueAccessorChangeFn=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e}validate(e){return this.required&&e.value!==!0?{required:!0}:null}registerOnValidatorChange(e){this._validatorChangeFn=e}_transitionCheckState(e){let t=this._currentCheckState,i=this._getAnimationTargetElement();if(!(t===e||!i)&&(this._currentAnimationClass&&i.classList.remove(this._currentAnimationClass),this._currentAnimationClass=this._getAnimationClassForCheckStateTransition(t,e),this._currentCheckState=e,this._currentAnimationClass.length>0)){i.classList.add(this._currentAnimationClass);let l=this._currentAnimationClass;this._ngZone.runOutsideAngular(()=>{setTimeout(()=>{i.classList.remove(l)},1e3)})}}_emitChangeEvent(){this._controlValueAccessorChangeFn(this.checked),this.change.emit(this._createChangeEvent(this.checked)),this._inputElement&&(this._inputElement.nativeElement.checked=this.checked)}toggle(){this.checked=!this.checked,this._controlValueAccessorChangeFn(this.checked)}_handleInputClick(){let e=this._options?.clickAction;!this.disabled&&e!=="noop"?(this.indeterminate&&e!=="check"&&Promise.resolve().then(()=>{this._indeterminate=!1,this.indeterminateChange.emit(this._indeterminate)}),this._checked=!this._checked,this._transitionCheckState(this._checked?f.Checked:f.Unchecked),this._emitChangeEvent()):(this.disabled&&this.disabledInteractive||!this.disabled&&e==="noop")&&(this._inputElement.nativeElement.checked=this.checked,this._inputElement.nativeElement.indeterminate=this.indeterminate)}_onInteractionEvent(e){e.stopPropagation()}_onBlur(){Promise.resolve().then(()=>{this._onTouched(),this._changeDetectorRef.markForCheck()})}_getAnimationClassForCheckStateTransition(e,t){if(this._animationMode==="NoopAnimations")return"";switch(e){case f.Init:if(t===f.Checked)return this._animationClasses.uncheckedToChecked;if(t==f.Indeterminate)return this._checked?this._animationClasses.checkedToIndeterminate:this._animationClasses.uncheckedToIndeterminate;break;case f.Unchecked:return t===f.Checked?this._animationClasses.uncheckedToChecked:this._animationClasses.uncheckedToIndeterminate;case f.Checked:return t===f.Unchecked?this._animationClasses.checkedToUnchecked:this._animationClasses.checkedToIndeterminate;case f.Indeterminate:return t===f.Checked?this._animationClasses.indeterminateToChecked:this._animationClasses.indeterminateToUnchecked}return""}_syncIndeterminate(e){let t=this._inputElement;t&&(t.nativeElement.indeterminate=e)}_onInputClick(){this._handleInputClick()}_onTouchTargetClick(){this._handleInputClick(),this.disabled||this._inputElement.nativeElement.focus()}_preventBubblingFromLabel(e){e.target&&this._labelElement.nativeElement.contains(e.target)&&e.stopPropagation()}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=y({type:r,selectors:[["mat-checkbox"]],viewQuery:function(t,i){if(t&1&&(Ee(hi,5),Ee(ui,5)),t&2){let l;Ie(l=Me())&&(i._inputElement=l.first),Ie(l=Me())&&(i._labelElement=l.first)}},hostAttrs:[1,"mat-mdc-checkbox"],hostVars:16,hostBindings:function(t,i){t&2&&(Qe("id",i.id),ge("tabindex",null)("aria-label",null)("aria-labelledby",null),He(i.color?"mat-"+i.color:"mat-accent"),Pe("_mat-animation-noopable",i._animationMode==="NoopAnimations")("mdc-checkbox--disabled",i.disabled)("mat-mdc-checkbox-disabled",i.disabled)("mat-mdc-checkbox-checked",i.checked)("mat-mdc-checkbox-disabled-interactive",i.disabledInteractive))},inputs:{ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[0,"aria-describedby","ariaDescribedby"],ariaExpanded:[2,"aria-expanded","ariaExpanded",M],ariaControls:[0,"aria-controls","ariaControls"],ariaOwns:[0,"aria-owns","ariaOwns"],id:"id",required:[2,"required","required",M],labelPosition:"labelPosition",name:"name",value:"value",disableRipple:[2,"disableRipple","disableRipple",M],tabIndex:[2,"tabIndex","tabIndex",e=>e==null?void 0:Je(e)],color:"color",disabledInteractive:[2,"disabledInteractive","disabledInteractive",M],checked:[2,"checked","checked",M],disabled:[2,"disabled","disabled",M],indeterminate:[2,"indeterminate","indeterminate",M]},outputs:{change:"change",indeterminateChange:"indeterminateChange"},exportAs:["matCheckbox"],features:[Z([fi,{provide:ht,useExisting:r,multi:!0}]),Oe],ngContentSelectors:bi,decls:15,vars:23,consts:[["checkbox",""],["input",""],["label",""],["mat-internal-form-field","",3,"click","labelPosition"],[1,"mdc-checkbox"],[1,"mat-mdc-checkbox-touch-target",3,"click"],["type","checkbox",1,"mdc-checkbox__native-control",3,"blur","click","change","checked","indeterminate","disabled","id","required","tabIndex"],[1,"mdc-checkbox__ripple"],[1,"mdc-checkbox__background"],["focusable","false","viewBox","0 0 24 24","aria-hidden","true",1,"mdc-checkbox__checkmark"],["fill","none","d","M1.73,12.91 8.1,19.28 22.79,4.59",1,"mdc-checkbox__checkmark-path"],[1,"mdc-checkbox__mixedmark"],["mat-ripple","",1,"mat-mdc-checkbox-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],[1,"mdc-label",3,"for"]],template:function(t,i){if(t&1){let l=g();We(),c(0,"div",3),m("click",function(S){return u(l),b(i._preventBubblingFromLabel(S))}),c(1,"div",4,0)(3,"div",5),m("click",function(){return u(l),b(i._onTouchTargetClick())}),a(),c(4,"input",6,1),m("blur",function(){return u(l),b(i._onBlur())})("click",function(){return u(l),b(i._onInputClick())})("change",function(S){return u(l),b(i._onInteractionEvent(S))}),a(),k(6,"div",7),c(7,"div",8),je(),c(8,"svg",9),k(9,"path",10),a(),Be(),k(10,"div",11),a(),k(11,"div",12),a(),c(12,"label",13,2),Ke(14),a()()}if(t&2){let l=I(2);s("labelPosition",i.labelPosition),d(4),Pe("mdc-checkbox--selected",i.checked),s("checked",i.checked)("indeterminate",i.indeterminate)("disabled",i.disabled&&!i.disabledInteractive)("id",i.inputId)("required",i.required)("tabIndex",i.disabled&&!i.disabledInteractive?-1:i.tabIndex),ge("aria-label",i.ariaLabel||null)("aria-labelledby",i.ariaLabelledby)("aria-describedby",i.ariaDescribedby)("aria-checked",i.indeterminate?"mixed":null)("aria-controls",i.ariaControls)("aria-disabled",i.disabled&&i.disabledInteractive?!0:null)("aria-expanded",i.ariaExpanded)("aria-owns",i.ariaOwns)("name",i.name)("value",i.value),d(7),s("matRippleTrigger",l)("matRippleDisabled",i.disableRipple||i.disabled)("matRippleCentered",!0),d(),s("for",i.inputId)}},dependencies:[lt,dt],styles:['.mdc-checkbox{display:inline-block;position:relative;flex:0 0 18px;box-sizing:content-box;width:18px;height:18px;line-height:0;white-space:nowrap;cursor:pointer;vertical-align:bottom;padding:calc((var(--mdc-checkbox-state-layer-size, 40px) - 18px)/2);margin:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px))/2)}.mdc-checkbox:hover>.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-unselected-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity));background-color:var(--mdc-checkbox-unselected-hover-state-layer-color, var(--mat-sys-on-surface))}.mdc-checkbox:hover>.mat-mdc-checkbox-ripple>.mat-ripple-element{background-color:var(--mdc-checkbox-unselected-hover-state-layer-color, var(--mat-sys-on-surface))}.mdc-checkbox .mdc-checkbox__native-control:focus+.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-unselected-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity));background-color:var(--mdc-checkbox-unselected-focus-state-layer-color, var(--mat-sys-on-surface))}.mdc-checkbox .mdc-checkbox__native-control:focus~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-unselected-focus-state-layer-color, var(--mat-sys-on-surface))}.mdc-checkbox:active>.mdc-checkbox__native-control+.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-unselected-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity));background-color:var(--mdc-checkbox-unselected-pressed-state-layer-color, var(--mat-sys-primary))}.mdc-checkbox:active>.mdc-checkbox__native-control~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-unselected-pressed-state-layer-color, var(--mat-sys-primary))}.mdc-checkbox:hover .mdc-checkbox__native-control:checked+.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-selected-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity));background-color:var(--mdc-checkbox-selected-hover-state-layer-color, var(--mat-sys-primary))}.mdc-checkbox:hover .mdc-checkbox__native-control:checked~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-selected-hover-state-layer-color, var(--mat-sys-primary))}.mdc-checkbox .mdc-checkbox__native-control:focus:checked+.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-selected-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity));background-color:var(--mdc-checkbox-selected-focus-state-layer-color, var(--mat-sys-primary))}.mdc-checkbox .mdc-checkbox__native-control:focus:checked~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-selected-focus-state-layer-color, var(--mat-sys-primary))}.mdc-checkbox:active>.mdc-checkbox__native-control:checked+.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-selected-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity));background-color:var(--mdc-checkbox-selected-pressed-state-layer-color, var(--mat-sys-on-surface))}.mdc-checkbox:active>.mdc-checkbox__native-control:checked~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-selected-pressed-state-layer-color, var(--mat-sys-on-surface))}.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox .mdc-checkbox__native-control~.mat-mdc-checkbox-ripple .mat-ripple-element,.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox .mdc-checkbox__native-control+.mdc-checkbox__ripple{background-color:var(--mdc-checkbox-unselected-hover-state-layer-color, var(--mat-sys-on-surface))}.mdc-checkbox .mdc-checkbox__native-control{position:absolute;margin:0;padding:0;opacity:0;cursor:inherit;z-index:1;width:var(--mdc-checkbox-state-layer-size, 40px);height:var(--mdc-checkbox-state-layer-size, 40px);top:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px))/2);right:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px))/2);left:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px))/2)}.mdc-checkbox--disabled{cursor:default;pointer-events:none}@media(forced-colors: active){.mdc-checkbox--disabled{opacity:.5}}.mdc-checkbox__background{display:inline-flex;position:absolute;align-items:center;justify-content:center;box-sizing:border-box;width:18px;height:18px;border:2px solid currentColor;border-radius:2px;background-color:rgba(0,0,0,0);pointer-events:none;will-change:background-color,border-color;transition:background-color 90ms cubic-bezier(0.4, 0, 0.6, 1),border-color 90ms cubic-bezier(0.4, 0, 0.6, 1);-webkit-print-color-adjust:exact;color-adjust:exact;border-color:var(--mdc-checkbox-unselected-icon-color, var(--mat-sys-on-surface-variant));top:calc((var(--mdc-checkbox-state-layer-size, 40px) - 18px)/2);left:calc((var(--mdc-checkbox-state-layer-size, 40px) - 18px)/2)}.mdc-checkbox__native-control:enabled:checked~.mdc-checkbox__background,.mdc-checkbox__native-control:enabled:indeterminate~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-icon-color, var(--mat-sys-primary));background-color:var(--mdc-checkbox-selected-icon-color, var(--mat-sys-primary))}.mdc-checkbox--disabled .mdc-checkbox__background{border-color:var(--mdc-checkbox-disabled-unselected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-checkbox__native-control:disabled:checked~.mdc-checkbox__background,.mdc-checkbox__native-control:disabled:indeterminate~.mdc-checkbox__background{background-color:var(--mdc-checkbox-disabled-selected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));border-color:rgba(0,0,0,0)}.mdc-checkbox:hover>.mdc-checkbox__native-control:not(:checked)~.mdc-checkbox__background,.mdc-checkbox:hover>.mdc-checkbox__native-control:not(:indeterminate)~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-hover-icon-color, var(--mat-sys-on-surface));background-color:rgba(0,0,0,0)}.mdc-checkbox:hover>.mdc-checkbox__native-control:checked~.mdc-checkbox__background,.mdc-checkbox:hover>.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-hover-icon-color, var(--mat-sys-primary));background-color:var(--mdc-checkbox-selected-hover-icon-color, var(--mat-sys-primary))}.mdc-checkbox__native-control:focus:focus:not(:checked)~.mdc-checkbox__background,.mdc-checkbox__native-control:focus:focus:not(:indeterminate)~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-focus-icon-color, var(--mat-sys-on-surface))}.mdc-checkbox__native-control:focus:focus:checked~.mdc-checkbox__background,.mdc-checkbox__native-control:focus:focus:indeterminate~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-focus-icon-color, var(--mat-sys-primary));background-color:var(--mdc-checkbox-selected-focus-icon-color, var(--mat-sys-primary))}.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox:hover>.mdc-checkbox__native-control~.mdc-checkbox__background,.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox .mdc-checkbox__native-control:focus~.mdc-checkbox__background,.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__background{border-color:var(--mdc-checkbox-disabled-unselected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__native-control:checked~.mdc-checkbox__background,.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background{background-color:var(--mdc-checkbox-disabled-selected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));border-color:rgba(0,0,0,0)}.mdc-checkbox__checkmark{position:absolute;top:0;right:0;bottom:0;left:0;width:100%;opacity:0;transition:opacity 180ms cubic-bezier(0.4, 0, 0.6, 1);color:var(--mdc-checkbox-selected-checkmark-color, var(--mat-sys-on-primary))}@media(forced-colors: active){.mdc-checkbox__checkmark{color:CanvasText}}.mdc-checkbox--disabled .mdc-checkbox__checkmark,.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__checkmark{color:var(--mdc-checkbox-disabled-selected-checkmark-color, var(--mat-sys-surface))}@media(forced-colors: active){.mdc-checkbox--disabled .mdc-checkbox__checkmark,.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__checkmark{color:CanvasText}}.mdc-checkbox__checkmark-path{transition:stroke-dashoffset 180ms cubic-bezier(0.4, 0, 0.6, 1);stroke:currentColor;stroke-width:3.12px;stroke-dashoffset:29.7833385;stroke-dasharray:29.7833385}.mdc-checkbox__mixedmark{width:100%;height:0;transform:scaleX(0) rotate(0deg);border-width:1px;border-style:solid;opacity:0;transition:opacity 90ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms cubic-bezier(0.4, 0, 0.6, 1);border-color:var(--mdc-checkbox-selected-checkmark-color, var(--mat-sys-on-primary))}@media(forced-colors: active){.mdc-checkbox__mixedmark{margin:0 1px}}.mdc-checkbox--disabled .mdc-checkbox__mixedmark,.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__mixedmark{border-color:var(--mdc-checkbox-disabled-selected-checkmark-color, var(--mat-sys-surface))}.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__background,.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__background,.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__background,.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__background{animation-duration:180ms;animation-timing-function:linear}.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__checkmark-path{animation:mdc-checkbox-unchecked-checked-checkmark-path 180ms linear;transition:none}.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__mixedmark{animation:mdc-checkbox-unchecked-indeterminate-mixedmark 90ms linear;transition:none}.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__checkmark-path{animation:mdc-checkbox-checked-unchecked-checkmark-path 90ms linear;transition:none}.mdc-checkbox--anim-checked-indeterminate .mdc-checkbox__checkmark{animation:mdc-checkbox-checked-indeterminate-checkmark 90ms linear;transition:none}.mdc-checkbox--anim-checked-indeterminate .mdc-checkbox__mixedmark{animation:mdc-checkbox-checked-indeterminate-mixedmark 90ms linear;transition:none}.mdc-checkbox--anim-indeterminate-checked .mdc-checkbox__checkmark{animation:mdc-checkbox-indeterminate-checked-checkmark 500ms linear;transition:none}.mdc-checkbox--anim-indeterminate-checked .mdc-checkbox__mixedmark{animation:mdc-checkbox-indeterminate-checked-mixedmark 500ms linear;transition:none}.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__mixedmark{animation:mdc-checkbox-indeterminate-unchecked-mixedmark 300ms linear;transition:none}.mdc-checkbox__native-control:checked~.mdc-checkbox__background,.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background{transition:border-color 90ms cubic-bezier(0, 0, 0.2, 1),background-color 90ms cubic-bezier(0, 0, 0.2, 1)}.mdc-checkbox__native-control:checked~.mdc-checkbox__background>.mdc-checkbox__checkmark>.mdc-checkbox__checkmark-path,.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background>.mdc-checkbox__checkmark>.mdc-checkbox__checkmark-path{stroke-dashoffset:0}.mdc-checkbox__native-control:checked~.mdc-checkbox__background>.mdc-checkbox__checkmark{transition:opacity 180ms cubic-bezier(0, 0, 0.2, 1),transform 180ms cubic-bezier(0, 0, 0.2, 1);opacity:1}.mdc-checkbox__native-control:checked~.mdc-checkbox__background>.mdc-checkbox__mixedmark{transform:scaleX(1) rotate(-45deg)}.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background>.mdc-checkbox__checkmark{transform:rotate(45deg);opacity:0;transition:opacity 90ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background>.mdc-checkbox__mixedmark{transform:scaleX(1) rotate(0deg);opacity:1}@keyframes mdc-checkbox-unchecked-checked-checkmark-path{0%,50%{stroke-dashoffset:29.7833385}50%{animation-timing-function:cubic-bezier(0, 0, 0.2, 1)}100%{stroke-dashoffset:0}}@keyframes mdc-checkbox-unchecked-indeterminate-mixedmark{0%,68.2%{transform:scaleX(0)}68.2%{animation-timing-function:cubic-bezier(0, 0, 0, 1)}100%{transform:scaleX(1)}}@keyframes mdc-checkbox-checked-unchecked-checkmark-path{from{animation-timing-function:cubic-bezier(0.4, 0, 1, 1);opacity:1;stroke-dashoffset:0}to{opacity:0;stroke-dashoffset:-29.7833385}}@keyframes mdc-checkbox-checked-indeterminate-checkmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 1);transform:rotate(0deg);opacity:1}to{transform:rotate(45deg);opacity:0}}@keyframes mdc-checkbox-indeterminate-checked-checkmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);transform:rotate(45deg);opacity:0}to{transform:rotate(360deg);opacity:1}}@keyframes mdc-checkbox-checked-indeterminate-mixedmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 1);transform:rotate(-45deg);opacity:0}to{transform:rotate(0deg);opacity:1}}@keyframes mdc-checkbox-indeterminate-checked-mixedmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);transform:rotate(0deg);opacity:1}to{transform:rotate(315deg);opacity:0}}@keyframes mdc-checkbox-indeterminate-unchecked-mixedmark{0%{animation-timing-function:linear;transform:scaleX(1);opacity:1}32.8%,100%{transform:scaleX(0);opacity:0}}.mat-mdc-checkbox{display:inline-block;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-checkbox._mat-animation-noopable>.mat-internal-form-field>.mdc-checkbox>.mat-mdc-checkbox-touch-target,.mat-mdc-checkbox._mat-animation-noopable>.mat-internal-form-field>.mdc-checkbox>.mdc-checkbox__native-control,.mat-mdc-checkbox._mat-animation-noopable>.mat-internal-form-field>.mdc-checkbox>.mdc-checkbox__ripple,.mat-mdc-checkbox._mat-animation-noopable>.mat-internal-form-field>.mdc-checkbox>.mat-mdc-checkbox-ripple::before,.mat-mdc-checkbox._mat-animation-noopable>.mat-internal-form-field>.mdc-checkbox>.mdc-checkbox__background,.mat-mdc-checkbox._mat-animation-noopable>.mat-internal-form-field>.mdc-checkbox>.mdc-checkbox__background>.mdc-checkbox__checkmark,.mat-mdc-checkbox._mat-animation-noopable>.mat-internal-form-field>.mdc-checkbox>.mdc-checkbox__background>.mdc-checkbox__checkmark>.mdc-checkbox__checkmark-path,.mat-mdc-checkbox._mat-animation-noopable>.mat-internal-form-field>.mdc-checkbox>.mdc-checkbox__background>.mdc-checkbox__mixedmark{transition:none !important;animation:none !important}.mat-mdc-checkbox label{cursor:pointer}.mat-mdc-checkbox .mat-internal-form-field{color:var(--mat-checkbox-label-text-color, var(--mat-sys-on-surface));font-family:var(--mat-checkbox-label-text-font, var(--mat-sys-body-medium-font));line-height:var(--mat-checkbox-label-text-line-height, var(--mat-sys-body-medium-line-height));font-size:var(--mat-checkbox-label-text-size, var(--mat-sys-body-medium-size));letter-spacing:var(--mat-checkbox-label-text-tracking, var(--mat-sys-body-medium-tracking));font-weight:var(--mat-checkbox-label-text-weight, var(--mat-sys-body-medium-weight))}.mat-mdc-checkbox.mat-mdc-checkbox-disabled.mat-mdc-checkbox-disabled-interactive{pointer-events:auto}.mat-mdc-checkbox.mat-mdc-checkbox-disabled.mat-mdc-checkbox-disabled-interactive input{cursor:default}.mat-mdc-checkbox.mat-mdc-checkbox-disabled label{cursor:default;color:var(--mat-checkbox-disabled-label-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-checkbox label:empty{display:none}.mat-mdc-checkbox .mdc-checkbox__ripple{opacity:0}.mat-mdc-checkbox .mat-mdc-checkbox-ripple,.mdc-checkbox__ripple{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:50%;pointer-events:none}.mat-mdc-checkbox .mat-mdc-checkbox-ripple:not(:empty),.mdc-checkbox__ripple:not(:empty){transform:translateZ(0)}.mat-mdc-checkbox-ripple .mat-ripple-element{opacity:.1}.mat-mdc-checkbox-touch-target{position:absolute;top:50%;left:50%;height:48px;width:48px;transform:translate(-50%, -50%);display:var(--mat-checkbox-touch-target-display, block)}.mat-mdc-checkbox .mat-mdc-checkbox-ripple::before{border-radius:50%}.mdc-checkbox__native-control:focus~.mat-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0})}return r})();var Ht=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=Xe({type:r});static \u0275inj=Ne({imports:[ye,De,De]})}return r})();var yi=(r,o)=>o.id;function vi(r,o){r&1&&(c(0,"p"),n(1,"No employees available to assign to this pay period."),a())}function xi(r,o){if(r&1&&(c(0,"mat-chip"),n(1),a()),r&2){let e=x().$implicit;d(),V(e.department)}}function gi(r,o){if(r&1){let e=g();c(0,"mat-list-item")(1,"mat-checkbox",6),m("change",function(){let i=u(e).$implicit,l=x();return b(l.toggleEmployee(i.id))}),n(2),a(),c(3,"span"),n(4),a(),v(5,xi,2,1,"mat-chip"),a(),k(6,"mat-divider")}if(r&2){let e=o.$implicit,t=x();d(),s("checked",t.isSelected(e.id)),d(),_(" ",e.name," "),d(2),V(e.role),d(),T(e.department?5:-1)}}var ve=class r{constructor(o,e,t){this.dialogRef=o;this.data=e;this.payrollService=t}availableEmployees=[];selectedEmployeeIds=new Set;searchControl=new bt("");filteredEmployees=[];ngOnInit(){this.loadAvailableEmployees(),this.setupSearchFilter()}loadAvailableEmployees(){let e=this.payrollService.getEmployees()().filter(i=>i.status==="Active"),t=new Set(this.payrollService.getEmployeesWithPayslips(this.data.payPeriod.id));this.availableEmployees=e.filter(i=>!t.has(i.id)),this.filteredEmployees=[...this.availableEmployees]}setupSearchFilter(){this.searchControl.valueChanges.subscribe(o=>{this.filterEmployees(o||"")})}filterEmployees(o){if(!o){this.filteredEmployees=[...this.availableEmployees];return}let e=o.toLowerCase();this.filteredEmployees=this.availableEmployees.filter(t=>t.name.toLowerCase().includes(e)||t.role.toLowerCase().includes(e)||t.department&&t.department.toLowerCase().includes(e))}toggleEmployee(o){this.selectedEmployeeIds.has(o)?this.selectedEmployeeIds.delete(o):this.selectedEmployeeIds.add(o)}isSelected(o){return this.selectedEmployeeIds.has(o)}selectAll(){this.filteredEmployees.forEach(o=>this.selectedEmployeeIds.add(o.id))}clearSelection(){this.selectedEmployeeIds.clear()}cancel(){this.dialogRef.close()}confirm(){let o=this.availableEmployees.filter(e=>this.selectedEmployeeIds.has(e.id));this.dialogRef.close(o)}static \u0275fac=function(e){return new(e||r)(p(q),p(he),p(D))};static \u0275cmp=y({type:r,selectors:[["app-assign-employees-to-period-dialog"]],decls:25,vars:5,consts:[["mat-dialog-title",""],["appearance","outline"],["matInput","","placeholder","Name, role, or department",3,"formControl"],[1,"selection-actions"],["mat-button","",3,"click"],["mat-raised-button","","color","primary",3,"click","disabled"],[3,"change","checked"]],template:function(e,t){e&1&&(c(0,"h2",0),n(1,"Assign Employees to Pay Period"),a(),c(2,"mat-dialog-content")(3,"h3"),n(4),a(),c(5,"mat-form-field",1)(6,"mat-label"),n(7,"Search Employees"),a(),k(8,"input",2),a(),c(9,"div",3)(10,"button",4),m("click",function(){return t.selectAll()}),n(11,"Select All"),a(),c(12,"button",4),m("click",function(){return t.clearSelection()}),n(13,"Clear"),a(),c(14,"span"),n(15),a()(),v(16,vi,2,0,"p"),c(17,"mat-list"),F(18,gi,7,4,null,null,yi),a()(),c(20,"mat-dialog-actions")(21,"button",4),m("click",function(){return t.cancel()}),n(22,"Cancel"),a(),c(23,"button",5),m("click",function(){return t.confirm()}),n(24," Assign Employees "),a()()),e&2&&(d(4),_("Pay Period: ",t.data.payPeriod.id,""),d(4),s("formControl",t.searchControl),d(7),_("",t.selectedEmployeeIds.size," employees selected"),d(),T(t.filteredEmployees.length===0?16:-1),d(2),A(t.filteredEmployees),d(5),s("disabled",t.selectedEmployeeIds.size===0))},dependencies:[R,X,G,$,U,P,L,se,le,de,j,Ht,ye,ne,O,z,N,Q,H,ie,ee,te,oe,ft,ce,re],encapsulation:2})};var Qt=class r{constructor(o,e,t,i,l,h){this.route=o;this.dialog=e;this.payrollService=t;this.payrollAnalytics=i;this.filterService=l;this.notification=h;this.route.queryParams.subscribe(S=>{S.expandedPeriodId&&this.currentPeriodId.set(S.expandedPeriodId)}),this.updatePayrollData(),et(()=>{this.updatePayrollData()})}payslips=E([]);payPeriods=E([]);filteredPayslips=E([]);payrollGroups=E([]);currentPeriodId=E("");updatePayrollData(){let o=this.payrollService.getPayslips()(),e=this.payrollService.getPayPeriods()(),t=this.payrollService.getEmployees()();this.payslips.set(o),this.payPeriods.set(e);let i=this.filterService.filterPayslips(o,t,e),l=this.payrollAnalytics.getPayslipsWithDetails(i,t,e);this.filteredPayslips.set(l);let h=this.payrollAnalytics.groupPayslipsByPeriod(l,e);this.payrollGroups.set(h),h.length>0&&this.currentPeriodId()===""&&this.currentPeriodId.set(h[0].periodId)}onPayslipClick(o){this.dialog.open(fe,{data:o.payslip})}addNewPayPeriod(){this.dialog.open(_e).afterClosed().subscribe(e=>{e&&(this.payrollService.addPayPeriod(e)?(this.notification.success("Pay period added successfully"),this.currentPeriodId.set(e.id),this.updatePayrollData()):this.notification.error("Failed to add pay period. ID already exists."))})}assignEmployeesToPeriod(o){let e=this.payPeriods().find(i=>i.id===o);if(!e){this.notification.error("Pay period not found");return}this.dialog.open(ve,{data:{payPeriod:e},width:"600px"}).afterClosed().subscribe(i=>{i&&i.length>0&&(this.payrollService.addEmployeesToPayPeriod(o,i)?(this.notification.success(`Assigned ${i.length} employee(s) to pay period`),this.updatePayrollData()):this.notification.error("Failed to assign employees to pay period"))})}processPayroll(o){this.payrollService.processPayroll(o.id),this.notification.success(`Payroll for period ${o.id} processed successfully`),this.updatePayrollData()}static \u0275fac=function(e){return new(e||r)(p(ot),p(St),p(D),p(Ct),p(W),p(pe))};static \u0275cmp=y({type:r,selectors:[["app-payroll"]],decls:2,vars:4,consts:[[3,"filterChange","addPayPeriod"],["title","Payroll Management",3,"processPayroll","assignEmployees","viewPayslip","payPeriods","payslipGroups","currentPeriodId","expandable"]],template:function(e,t){e&1&&(c(0,"app-payroll-toolbar",0),m("filterChange",function(){return t.updatePayrollData()})("addPayPeriod",function(){return t.addNewPayPeriod()}),a(),c(1,"app-pay-period-list",1),m("processPayroll",function(l){return t.processPayroll(l)})("assignEmployees",function(l){return t.assignEmployeesToPeriod(l)})("viewPayslip",function(l){return t.onPayslipClick(l)}),a()),e&2&&(d(),s("payPeriods",t.payPeriods())("payslipGroups",t.payrollGroups())("currentPeriodId",t.currentPeriodId())("expandable",!0))},dependencies:[R,st,P,be,Dt],encapsulation:2})};export{Qt as PayrollComponent};
