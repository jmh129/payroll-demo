import{n as c}from"./chunk-IHJXRI23.js";import{V as y,a as p,b as P,wa as i}from"./chunk-LGPHYK4G.js";var o=(s=>(s.Pending="Pending",s.Processed="Processed",s.Paid="Paid",s))(o||{});var l=[{id:"PER-2025-03",startDate:"2025-03-01",endDate:"2025-03-31",status:"Pending"},{id:"PER-2025-02",startDate:"2025-02-01",endDate:"2025-02-28",status:"Processed"},{id:"PER-2025-01",startDate:"2025-01-01",endDate:"2025-01-31",status:"Paid"}];var m=[{id:"EMP-001-PER-2025-01",employeeId:"EMP-001",periodId:"PER-2025-01",grossPay:6250,deductions:[{type:"Federal Tax",amount:1250,percentage:.2},{type:"Health Insurance",amount:200}],netPay:4800,paymentDate:"2025-01-31"},{id:"EMP-002-PER-2025-01",employeeId:"EMP-002",periodId:"PER-2025-01",grossPay:5e3,deductions:[{type:"Income Tax",amount:1e3,percentage:.2},{type:"National Insurance",amount:150}],netPay:3850,paymentDate:"2025-01-31"},{id:"EMP-005-PER-2025-02",employeeId:"EMP-005",periodId:"PER-2025-02",grossPay:6833.33,deductions:[{type:"Income Tax",amount:1366.67,percentage:.2},{type:"Social Security",amount:250}],netPay:5216.66,paymentDate:"2025-02-28"}];var u=class r{employees=i(c);payPeriods=i(l);payslips=i(m);getEmployees(){return this.employees.asReadonly()}getPayPeriods(){return this.payPeriods.asReadonly()}getPayslips(){return this.payslips.asReadonly()}getPayslipsByEmployeeId(t){return i(this.payslips().filter(e=>e.employeeId===t))}getPayslipById(t){return this.payslips().find(e=>e.id===t)}calculatePayslip(t,e){let s=this.daysBetween(e.startDate,e.endDate),n=t.baseSalary/365*s,d=[{type:"Income Tax",percentage:.2,amount:n*.2},{type:"Health Insurance",amount:200}],g=d.reduce((D,E)=>D+E.amount,0),I=n-g+(t.bonus?t.bonus/12:0);return{id:`${t.id}-${e.id}`,employeeId:t.id,periodId:e.id,grossPay:n,deductions:d,netPay:I,paymentDate:e.endDate}}processPayroll(t){let e=this.payPeriods().find(a=>a.id===t);if(!e||e.status!=="Pending")return;let s=this.employees().filter(a=>a.status==="Active").map(a=>this.calculatePayslip(a,e));this.payslips.update(a=>[...a,...s]),this.payPeriods.update(a=>a.map(n=>n.id===t?P(p({},n),{status:"Processed"}):n))}daysBetween(t,e){let s=new Date(t);return(new Date(e).getTime()-s.getTime())/(1e3*3600*24)+1}static \u0275fac=function(e){return new(e||r)};static \u0275prov=y({token:r,factory:r.\u0275fac,providedIn:"root"})};export{o as a,u as b};
